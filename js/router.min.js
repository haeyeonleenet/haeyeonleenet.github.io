import{homeView,aboutView,mediaView,scheduleView,contactView}from"./views.js";export default class Router{constructor(){this.routes={"/":homeView,"/about":aboutView,"/media":mediaView,"/schedule":scheduleView,"/contact":contactView},this.app=document.getElementById("app")}init(){const e=new URLSearchParams(window.location.search).get("p");e?(window.history.replaceState(null,null,e),this.handleRoute(e),this.updateActiveLink(e)):(this.handleRoute(window.location.pathname),this.updateActiveLink(window.location.pathname)),window.addEventListener("popstate",()=>{this.handleRoute(window.location.pathname),this.updateActiveLink(window.location.pathname)}),document.body.addEventListener("click",e=>{if(e.target.matches("[data-link]")&&(e.preventDefault(),this.navigateTo(e.target.href)),e.target.matches(".tab-btn")){const t=e.target.getAttribute("data-tab"),a=e.target.closest(".content-section");a.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active")),e.target.classList.add("active"),a.querySelectorAll(".tab-pane").forEach(e=>{e.id===t?(e.style.display="block",e.classList.add("active")):(e.style.display="none",e.classList.remove("active"))})}})}navigateTo(e){window.history.pushState(null,null,e),this.handleRoute(window.location.pathname),this.updateActiveLink(window.location.pathname)}async handleRoute(e){const t=this.routes[e]||this.routes["/"];this.app.innerHTML=t();document.title={"/":"Haeyeon Lee | Soprano","/about":"About | Haeyeon Lee","/media":"Media | Haeyeon Lee","/schedule":"Schedule | Haeyeon Lee","/contact":"Contact | Haeyeon Lee"}[e]||"Haeyeon Lee | Soprano",window.scrollTo(0,0)}updateActiveLink(e){document.querySelectorAll(".site-nav a").forEach(t=>{t.getAttribute("href")===e?t.classList.add("active"):t.classList.remove("active")})}}